{"version":3,"sources":["index.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","checkModulesLoaded","noop","moduleList","angular","Error","forEach","err","console","error","__WEBPACK_IMPORTED_MODULE_0__utils__","Form","$form","reject","response","undefined","$setPristine","status","data","general","$error","Array","isArray","keys","key","__WEBPACK_IMPORTED_MODULE_0__form__","__WEBPACK_IMPORTED_MODULE_1__utils__","PCAuthProvider","_PCUser","_$http","_$timeout","_lodash","_$q","_$cookies","_jwtHelper","User","user","email","role","role_object","roleObject","meta","token","tokenExpirationHandled","patt","RegExp","test","roleList","Number","indexOf","expiration","getTokenExpirationDate","now","Date","utc_timestamp","UTC","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","difference","AuthConfig","endpoint","tokenRefreshEndpoint","onTokenExpiration","auth","refreshToken","Auth","config","statusChangeCallbacks","_authChecked","_me","_getMe","_tokenChecker","pushValidationMessageToForm","_auth","resolve","me","$promise","then","catch","remove","cb","push","index","splice","warn","tokenCheckerInterval","setInterval","checkToken","logout","route","post","res","put","_runStatusChangeCallbacks","errorHandler","finally","refresh","roles","when","hasRole","_addStatusChangeCallback","_removeStatusChangeCallback","self","$get","PCUser","$http","$timeout","$q","lodash","$cookies","jwtHelper","PCAuthInterceptorProvider","_config","_$injector","responseErrorHandlers","InterceptorConfig","AuthInterceptor","headers","Authorization","handler","$injector","roleRestrictConfig","_PCAuth","_$parse","show","element","removeClass","hide","addClass","RoleRestricterLink","$scope","attrs","controller","transclude","clone","append","watcher","pcRoleRestrict","has","on","PCAuth","$parse","restict","link","routerDecorator","_$state","handleConfigError","stateName","stateChangeHandler","event","nextState","nextParams","fromState","fromParams","restrict","allowedRoles","isNaN","preventDefault","transitionTo","$rootScope","$state","$on","PCUserProvider","resourceProvider","UserResourceConfig","paramDefaults","actions","method","update","params","id","UserResource","$resource","resource","query","instance","list","$delete","findIndex","parameters","param","$update","result","$save","__WEBPACK_IMPORTED_MODULE_0__src_utils__","__WEBPACK_IMPORTED_MODULE_1__src_auth_provider__","__WEBPACK_IMPORTED_MODULE_2__src_interceptor_provider__","__WEBPACK_IMPORTED_MODULE_3__src_user_provider__","__WEBPACK_IMPORTED_MODULE_4__src_router_decorator__","__WEBPACK_IMPORTED_MODULE_5__src_role_restrict_directive__","MODULE_NAME","dependencies","addInterceptor","$httpProvider","interceptors","provider","run","directive"],"mappings":"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","file":"boundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = checkModulesLoaded;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = noop;\n\n\nfunction checkModulesLoaded(moduleList){\n    if(typeof angular === 'undefined'){\n        throw new Error('ERROR: Angular is not defined. Please include it first.');\n        return;\n    }\n    moduleList.forEach(module => {\n        try {\n            angular.module(module);\n        } catch(err) {\n            console.error(`Error: dependency ${module} not loaded.`);\n        }\n    });\n};\n\nfunction noop(){};\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\n\n\nclass Form{\n    /**\n     * Pushes error messages to an angular form\n     * @param   {object}    $form   the reference of the form\n     * @return  {function}\n     */\n    static pushValidationMessageToForm($form, reject){\n        return function(response){\n            if($form !== undefined && typeof $form.$setPristine == 'function'){\n                if(response.status == 400 && response.data.error){\n                    $form.general = {\n                        $error : {}\n                    };\n                    if(typeof response.data.error == 'string'){\n                        $form.general.$error.error =\n                            Array.isArray(response.data.error) ?\n                            response.data.error : [response.data.error];\n                    }else{\n                        Object.keys($form).forEach(function(key){\n                            let value = response.data.error[key];\n                            if($form[key] && $form[key].$error)\n                            $form[key].$error.error = value;\n                        });\n                    }\n                }\n            }\n            return (reject || __WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* noop */])(response);\n        }\n    }\n}\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Form;\n\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__form__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils__ = __webpack_require__(0);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PCAuthProvider;\n\n\n\n\n\nlet _PCUser,\n    _$http,\n    _$timeout,\n    _lodash,\n    _$q,\n    _$cookies,\n    _jwtHelper\n    ;\n\nclass User{\n    constructor(data){\n        let user = this;\n\n        this.name = data.name || '';\n        this.email = data.email || '';\n        this.role = data.role;\n        this.role_object = data.roleObject || {};\n        this.meta = data.meta || {};\n        this.token = data.token;\n\n        this.tokenExpirationHandled = false;\n\n        Object.keys(data).forEach(function(key){\n            var patt = new RegExp(/^\\$/);\n            if(!patt.test(key)){\n                user[key] = data[key];\n            }\n        });\n    };\n\n    /**\n     * Check if user had one of the provided roles\n     * @param {Array<Number>|String|Number}    role  role or role list\n     */\n    hasRole(role){\n        let roleList = [];\n\n        if(role && Array.isArray(role)){\n            roleList = role;\n        }else if (role && typeof role == 'string') {\n            roleList = [Number(role)];\n        }else if(role && typeof role == 'number'){\n            roleList = [role];\n        }else{\n            return true;\n        }\n\n        return roleList.indexOf(this.role) > -1;\n    };\n\n    /**\n     * Cheks the token lifetime and returns different values\n     * according to the remaining time\n     * @return\n     *          null    if no token\n     *          true    if more than 10 seconds remaining\n     *          -1      if less than 10 seconds remaining and need to react\n     *          -2      if less than 10 seconds remaining but already reacted\n     *          -3      if still no proper token\n     */\n    checkToken(){\n        if(!this.token){\n            return null;\n        }else{\n            let expiration = _jwtHelper.getTokenExpirationDate(this.token);\n            var now = new Date;\n            var utc_timestamp = Date.UTC(now.getUTCFullYear(),now.getUTCMonth(), now.getUTCDate() ,\n                 now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds(), now.getUTCMilliseconds());\n            let difference = expiration - utc_timestamp;\n\n            // console.log(`Token will expire in ${difference / 1000} seconds`, `At ${expiration.toString()}`);\n            if(difference > 10 * 1000){\n                return true;\n            }else if(difference < 10 * 1000 && difference >= 0){\n                if(!this.tokenExpirationHandled){\n                    this.tokenExpirationHandled = true;\n                    return -1;\n                    return;\n                }else{\n                    return -2;\n                }\n            }else{\n                if(this.tokenExpirationHandled && this.token){\n                    this.token = null;\n                    return -3;\n                }\n                this.token = null;\n                return null;\n            }\n        }\n    }\n\n    /**\n     * Call after token refreshed to reinitialize the handler\n     * @param  {String} token new token\n     * @return {void}\n     */\n    refresh(token){\n        this.token = token;\n        this.tokenExpirationHandled = false;\n    }\n}\n/* unused harmony export User */\n;\n\n/**\n * Default configuration Object\n */\nclass AuthConfig{\n    constructor(){\n        this.endpoint = '/api/';\n        this.tokenRefreshEndpoint = '/refresh-token';\n        this.onTokenExpiration = (auth) => {\n            auth.refreshToken();\n        };\n    }\n}\n/* unused harmony export AuthConfig */\n;\n\n/**\n * Auth Class\n */\nclass Auth{\n\n    constructor(config){\n        this.statusChangeCallbacks = [];\n        this._authChecked = false;\n        this.config = config;\n        this._me = this._getMe();\n        this._tokenChecker();\n    };\n\n    /**\n     * Handles form errors\n     * @param   {Objec}                 $form   Angular form\n     * @param   {Function}(optional)    reject  reject callback, what should be\n     *                                  called after form error handling\n     * @return  {Fuction}\n     */\n    errorHandler($form, reject){\n        return __WEBPACK_IMPORTED_MODULE_0__form__[\"a\" /* default */].pushValidationMessageToForm($form, reject);\n    }\n\n    /**\n     * Get the current user data from the server\n     * @return {Promise}    User object\n     */\n    _getMe(){\n        // Actual request goes here:\n        let _auth = this;\n        return _$q(function(resolve, reject){\n            if(_$cookies.get('token')){\n                _PCUser.me().$promise\n                    .then(function(response){\n                        _auth._me = new User(response);\n                        resolve(_auth._me);\n                    })\n                    .catch(function(response){\n                        _$cookies.remove('token');\n                        _auth._me = new User({});\n                        resolve(_auth._me);\n                    });\n\n            }else{\n                _auth._me = new User({});\n                resolve(_auth._me);\n            }\n        });\n    }\n\n    /**\n     * Add callback to the status change callback array\n     */\n    _addStatusChangeCallback(cb){\n        let auth = this;\n        if(typeof cb !== 'function'){\n            console.error(`Status change callback must be a function. ${typeof cb} given.`);\n            return;\n        }\n\n        auth.statusChangeCallbacks.push(cb);\n    }\n\n    /**\n     * Remove callback from the status change callback array\n     */\n    _removeStatusChangeCallback(cb){\n        let auth = this;\n        let index = auth.statusChangeCallbacks.indexOf(cb);\n        if(index > -1){\n            auth.statusChangeCallbacks.splice(index, 1);\n        }else{\n            console.warn('Calback could not found.');\n        }\n    }\n\n    /**\n     * Run status change callbacks\n     */\n    _runStatusChangeCallbacks(me){\n        let auth = this;\n        auth.statusChangeCallbacks.forEach(function(cb){\n            cb(me);\n        });\n    }\n\n    /**\n     * Checks token on every seconds\n     * @return {[type]} [description]\n     */\n    _tokenChecker(){\n        if(!this.tokenCheckerInterval){\n            this.tokenCheckerInterval = setInterval(() => {\n                this.me.then((me) => {\n                    let token = me.checkToken();\n                    if(token === null){\n                        // No token\n                    }else if(token === undefined){\n                        // No user\n                    }else if(token === true){\n                        // Token OK\n                    }else if(token === -1){\n                        // Token will expire need to handle\n                        this.config.onTokenExpiration(this);\n                    }else if(token === -2){\n                        // token will expire but already handled\n                    }else if(token === -3){\n                        // token expired and not refreshed. Need to logout.\n                        this.logout();\n                    }\n                });\n            }, 1000);\n        }\n    }\n\n    /**\n     * Log in the current user\n     * @param   {Object}            data    user data\n     * @param   {Object}(optional)  $form   Angular form, what should be\n     *                                      filled with error messeges\n     * @return  {Promise}\n     */\n    login(data, $form, route){\n        let auth = this;\n        return new _$q(function(resolve, reject){\n            return _$http\n                .post(`${auth.config.endpoint}${route || 'login'}`, data)\n                .then(res => {\n                    if(res.status === 200){\n                        _$cookies.put('token', res.data.token);\n                        auth._me = new User(res.data);\n                        auth._runStatusChangeCallbacks(auth._me);\n                        return resolve(auth._me);\n                    }else{\n                        return auth.errorHandler($form, reject)(res);\n                    }\n                })\n                .catch(auth.errorHandler($form, reject))\n                ;\n        });\n    }\n\n    /**\n     * Log out the current user\n     * @return {Promise}\n     */\n    logout(){\n        let auth = this;\n        return new _$q(function(resolve, reject){\n            _$http.get(`${auth.config.endpoint}logout`)\n            .then(response => {\n                resolve(response);\n            })\n            .catch(response => {\n                console.warn('User logged out, but got error from API.', response);\n                resolve(response);\n            })\n            .finally(() => {\n                _$cookies.remove('token');\n                auth._me = new User({});\n                auth._runStatusChangeCallbacks(auth._me);\n            });\n            ;\n        });\n    }\n\n    /**\n     * get the user object from the server\n     * @return {Promise}\n     */\n    refreshUser(user){\n        let auth = this;\n        if(user){\n            auth._me = new User(user);\n        }else{\n            auth._me = auth._getMe();\n        }\n        return auth.me\n            .then((me) => {\n                auth._runStatusChangeCallbacks(me);\n            });\n    }\n\n    /**\n     * Call for token refresh\n     * @return {Promise} $q promise\n     */\n    refreshToken(){\n        let auth = this;\n        return new _$q(function(resolve, reject){\n            return _$http\n                .get(`${auth.config.tokenRefreshEndpoint}`)\n                .then(res => {\n                    if(res.status === 200){\n                        _$cookies.put('token', res.data.token);\n                        auth._me.refresh(res.data.token);\n                        auth._runStatusChangeCallbacks(auth._me);\n                        return resolve(auth._me);\n                    }else{\n                        return reject(res);\n                    }\n                })\n                .catch((response) => {\n                    console.error(response);\n                })\n                ;\n        });\n    }\n\n    /**\n     * Get the current user\n     * @return {Promise}\n     */\n    get me(){\n        let value = _lodash.get(this._me, '$promise') ? this._me.$promise : this._me;\n        return _$q.when(value);\n    }\n\n    /**\n     * Modifying user object outside of the class is not allowed\n     * @param {object}  me  user object what won't be used\n     * @return void\n     */\n    set me(me) {};\n\n    getToken(){\n        //console.log('get token');\n    }\n\n    /**\n     * Checks if current user had roles\n     * @param  {number|string|Array<number>}  roles [description]\n     * @return {Boolean}       true if has\n     */\n    hasRole(roles){\n        let value = _lodash.get(this._me, '$promise') ? this._me.$promise : this._me;\n        return _$q.when(value)\n            .then(me => {\n                return me.hasRole(roles);\n            })\n    }\n\n    /**\n     * Add a callback which is called when user login status changes\n     * Returns the remove function, so call it to deregister the specific\n     * callback\n     */\n    onStatusChange(cb){\n        let auth = this;\n        auth._addStatusChangeCallback(cb);\n        return function(){\n            auth._removeStatusChangeCallback(cb);\n        }\n    }\n\n}\n/* unused harmony export Auth */\n;\n\n/**\n * PCAuth Provider\n */\nfunction PCAuthProvider(){\n\n    let self = this;\n\n    self.config = new AuthConfig();\n\n    self.$get = function(PCUser, $http, $timeout, $q, lodash, $cookies,\n        jwtHelper){\n         _PCUser = PCUser;\n         _$http = $http;\n         _$timeout = $timeout;\n         _$q = $q;\n         _lodash = lodash;\n         _$cookies = $cookies;\n         _jwtHelper = jwtHelper;\n         return new Auth(self.config, PCUser);\n     };\n};\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PCAuthInterceptorProvider;\n\n\n\n\nvar _config,\n    _$injector,\n    _$cookies,\n    _$q\n    ;\n\nclass responseErrorHandlers{\n\n    constructor(){\n        this[400] = function(data){\n            // console.error('Error: 400', data);\n        };\n        this[401] = function(data){\n            // console.error('Error: 401', data);\n        };\n        this[403] = function(data){\n            // console.error('Error: 403', data);\n        };\n        this[404] = function(data){\n            // console.error('Error: 403', data);\n        };\n        this[500] = function(data){\n            // console.error('Error: 500', data);\n        };\n    }\n\n}\n/* unused harmony export responseErrorHandlers */\n;\n\nclass InterceptorConfig{\n\n    constructor(){\n        this.responseErrorHandlers = new responseErrorHandlers();\n    };\n\n}\n/* unused harmony export InterceptorConfig */\n;\n\nclass AuthInterceptor{\n\n    constructor(config){\n        //console.log('Initiating AuthInterceptor', this);\n        _config = config;\n    };\n\n    request(config){\n        //console.log('AuthInterceptor', 'request');\n        config.headers = config.headers || {};\n        if(_$cookies.get('token')) {\n            //console.log(`Bearer ${_$cookies.get('token')}`);\n            config.headers.Authorization = `Bearer ${_$cookies.get('token')}`;\n        }\n        return config;\n    };\n\n    responseError(response){\n        // console.error('AuthInterceptor', 'responseError', response);\n        let handler = _config.responseErrorHandlers[response.status] || __WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* noop */];\n        handler(response.data, _$injector);\n        return _$q.reject(response)\n        // return response;\n    };\n\n}\n/* unused harmony export AuthInterceptor */\n;\n\nfunction PCAuthInterceptorProvider(){\n\n    let self = this;\n\n    self.config = new InterceptorConfig();\n\n    self.$get = function($injector, $cookies, $q){\n        _$injector = $injector;\n        _$cookies = $cookies;\n        _$q = $q;\n        return new AuthInterceptor(self.config );\n    };\n\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils__ = __webpack_require__(0);\n/* unused harmony export RoleRestricterLink */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = roleRestrictConfig;\n\n\n\n\nlet\n    _PCAuth,\n    _$parse\n    ;\n\n/**\n * Shows an element via removing `ng-hide` class\n * @param   {Object}   element      jqLite element\n */\nfunction show(element){\n    element.removeClass('ng-hide');\n}\n\n/**\n * Hides an element via adding `ng-hide` class\n * @param   {Object}   element      jqLite element\n */\nfunction hide(element){\n    element.addClass('ng-hide');\n}\n\n/**\n * Link function of the directive\n * Compares the passed number or array of numbers\n * with the users role number.\n * If the array contains the user's role, or the given number equals to\n * it, then it makes the element visible, otherwise hidden.\n */\nfunction RoleRestricterLink($scope, element, attrs, controller,\n        transclude) {\n\n    transclude($scope, function (clone) {\n        element.append(clone);\n    });\n\n    let\n        me,\n        watcher = __WEBPACK_IMPORTED_MODULE_0__utils__[\"b\" /* noop */],\n        roles = _$parse(attrs.pcRoleRestrict)($scope);\n\n    //First hide the element\n    hide(element);\n\n\n    _PCAuth.hasRole(roles)\n        // When the user resolved, it comperses the roles\n        .then(has => {\n            (has ? show : hide)(element);\n        })\n        .catch(function(){\n            show(element);\n        })\n\n    element.on('$destroy', function(){\n        // Clean up $scope watcher\n        watcher();\n    });\n};\n\nfunction roleRestrictConfig(PCAuth, $parse) {\n\n    _PCAuth = PCAuth;\n    _$parse = $parse;\n\n    return {\n        restict: 'E',\n        transclude: true,\n        // scope: {\n        //     restrict: '&pcRoleRestrict'\n        // },\n        link: RoleRestricterLink\n    };\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export stateChangeHandler */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = routerDecorator;\n\n\nlet\n    Auth,\n    _$state\n    ;\n\nfunction handleConfigError(stateName, role){\n    console.error(\n        `Error:\\n\n        Invalid restrict value provided in ${stateName}.\\n\n        It should be either number or array of numbers.\\n\n        ${typeof role} given.`);\n        return;\n}\n\nfunction stateChangeHandler(event, nextState, nextParams, fromState,\n        fromParams){\n\n    // console.log('routerDecorator', nextState, fromState);\n    if(!nextState.restrict){\n        // console.log('routerDecorator no need to check role');\n        return;\n    }\n\n    // console.log('routerDecorator need to check role');\n\n    let allowedRoles = [];\n\n    if(typeof nextState.restrict === 'number'){\n        allowedRoles.push(nextState.restrict);\n    }else if (typeof nextState.restrict == 'string') {\n        if(isNaN(nextState.restrict)){\n            return handleConfigError(nextState.name, nextState.restrict);\n        }\n        allowedRoles.push(Number(nextState.restrict));\n    } else if(Array.isArray(nextState.restrict)){\n        allowedRoles = nextState.restrict;\n    }else{\n        return handleConfigError(nextState.name, nextState.restrict);\n    }\n\n    let hasRole = Auth.hasRole(allowedRoles);\n    return hasRole\n        .then(has =>{\n            if(has){\n                // console.log('routerDecorator has role');\n                return;\n            }\n            // console.log('routerDecorator has no role');\n\n            event.preventDefault();\n\n            if(fromState.name === \"\"){\n                // first Route\n                // Should redirect to default route\n\n            }else {\n                // Navigating inside application\n                // Should return to previous route\n                _$state.transitionTo(fromState.name);\n            }\n        });\n};\n\nfunction routerDecorator($rootScope, $state, PCAuth){\n    Auth = PCAuth;\n    _$state = $state;\n    $rootScope.$on('$stateChangeStart', stateChangeHandler);\n\n};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__form__ = __webpack_require__(1);\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = PCUserProvider;\n\n\n\n\nlet resourceProvider;\nlet _lodash;\n\nclass UserResourceConfig{\n    constructor(){\n        this.endpoint = '/api/users';\n        this.paramDefaults = {\n            'id' : '@id'\n        };\n        this.actions = {\n            index:  {\n                method: 'GET',\n                isArray: true\n            },\n            update: {\n                method: 'PUT'\n            },\n            me: {\n                method: 'GET',\n                params: {\n                    id: 'me'\n                }\n            }\n        };\n    };\n}\n/* unused harmony export UserResourceConfig */\n;\n\n/**\n * User resource class\n * responsible for user CRUD\n */\nclass UserResource{\n    constructor({endpoint, paramDefaults, actions}, $resource){\n        resourceProvider = $resource;\n        this.resource = $resource(`${endpoint}/:id/:controller`, paramDefaults, actions);\n    }\n\n    /**\n     * Pushes error messages to an angular form\n     * @param   {object}    $form   the reference of the form\n     * @return  {function}\n     */\n    errorHandler($form){\n        return __WEBPACK_IMPORTED_MODULE_0__form__[\"a\" /* default */].pushValidationMessageToForm($form);\n    }\n\n    /**\n     * Get a lit of users\n     * @param   {object}(optional)  query   additional query\n     * @return  {Promise}\n     */\n    index(query = {}){\n        return this.resource.index(query);\n    }\n\n    /**\n     * Get a user\n     * @param   {object}    query   additional query\n     * @return  {Promise}\n     */\n    get(query = {}){\n        return this.resource.get(query);\n    }\n\n    /**\n     * Get the current user\n     * @return {Promise}\n     */\n    me(){\n        return this.resource.me();\n    }\n\n    /**\n     * Deletes an item\n     * @param   {object}            data    user data\n     * @param   {array}(optional)   list    list of users we will get out the user object from\n     * @return  {Promise}\n     */\n    delete(data, ...parameters){\n        let instance = data && typeof data === 'object' && data.hasOwnProperty('$delete') ?\n            data : new this.resource(data),\n            list = Array.isArray(parameters[0]) ? parameters[0] : undefined;\n\n        return instance.$delete({id: instance.id}, function(){\n            if(typeof list !== undefined){\n                let index = _lodash.findIndex(list, {id: instance.id});\n                if(index > -1){ list.splice(index, 1); }\n            }\n        }, this.errorHandler());\n    }\n\n    /**\n     * Saves an item\n     * If data object has an id, it will consider the request as an update,\n     * if id not provided, then it will be a create request\n     * @param   {object}            data    user dtata\n     * @param   {array}(optional)   list    list of users we manipulate after the request\n     * @param   {object}(optional)  $form   angular form we will push error messages into\n     * @return  {Promise}\n     */\n    save(data, ...parameters){\n\n        let list = undefined,\n            $form = undefined,\n            instance = new this.resource(data);\n\n        parameters.forEach(function(param){\n            if(param !== null && typeof param === 'object'){\n                $form = param;\n            }\n            if(param !== null && Array.isArray(param)){\n                list = param;\n            }\n        });\n\n        if(instance.id){\n            return instance.$update({id:instance.id}, function(result){\n                if(list !== undefined){\n                    let index = _lodash.findIndex(list, {id: instance.id});\n                    if(index > -1){ list.splice(index, 1, result); }\n                }\n            }, this.errorHandler($form));\n        }else{\n            return instance.$save(function(result){\n                if(list !== undefined){\n                    list.push(result);\n                }\n            }, this.errorHandler($form));\n        }\n    }\n}\n/* unused harmony export UserResource */\n;\n\n/**\n * User Resource Provider\n * @return Angular Provider\n */\nfunction PCUserProvider(){\n\n    let self = this;\n\n    self.config = new UserResourceConfig();\n\n    this.$get = function($resource, lodash)\n    {\n        _lodash = lodash;\n        return new UserResource(self.config, $resource);\n    };\n\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_utils__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_auth_provider__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__src_interceptor_provider__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__src_user_provider__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__src_router_decorator__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__src_role_restrict_directive__ = __webpack_require__(4);\n\n\n\n\n\n\n\n\n\nconst MODULE_NAME = 'popcode-kit.auth';\nlet dependencies = ['ngCookies', 'ui.router', 'ngResource', 'ngLodash',\n    'angular-jwt'];\n\n__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__src_utils__[\"a\" /* checkModulesLoaded */])(dependencies);\n\nfunction addInterceptor($httpProvider) {\n  $httpProvider.interceptors.push('PCAuthInterceptor');\n}\n\nangular.module(MODULE_NAME, dependencies)\n    .provider('PCAuthInterceptor', __WEBPACK_IMPORTED_MODULE_2__src_interceptor_provider__[\"a\" /* PCAuthInterceptorProvider */])\n    .run(__WEBPACK_IMPORTED_MODULE_4__src_router_decorator__[\"a\" /* routerDecorator */])\n    .provider('PCAuth', __WEBPACK_IMPORTED_MODULE_1__src_auth_provider__[\"a\" /* PCAuthProvider */])\n    .provider('PCUser', __WEBPACK_IMPORTED_MODULE_3__src_user_provider__[\"a\" /* PCUserProvider */])\n    .directive('pcRoleRestrict', __WEBPACK_IMPORTED_MODULE_5__src_role_restrict_directive__[\"a\" /* roleRestrictConfig */])\n    .config(['$httpProvider', addInterceptor])\n    .name\n    ;\n\n\n/***/ })\n/******/ ]);"]}